<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Udacity Todos Goals</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/3.7.2/redux.min.js"></script>
    <script src="https://unpkg.com/react@16.3.0-alpha.1/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16.3.0-alpha.1/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
    <script src="https://tylermcginnis.com/goals-todos-api/index.js"></script>
    <script src="https://unpkg.com/redux-thunk@2.2.0/dist/redux-thunk.min.js"></script>
    <script src="https://unpkg.com/react-redux@5.0.6/dist/react-redux.min.js"></script>
</head>
<body>
    <div id='app'></div>
    <script type="text/javascript">
        // genero l'Id
        function generateId () {
            return Math.random().toString(36).substring(2) + (new Date()).getTime().toString(36);
        }

        /*
        App Code
        */






        // creo il THUNK MIDDLEWARE
        const thunk = (store) => (next) => (action) => {
            // controllo se Ã¨ una funzione
            if (typeof action === 'function') {
                return action(store.dispatch)
            }

            // altrimenti invoco next passandogli l'action object
            return next(action);
        }

        // creo lo store passandogli lo Specifico Reducer
        const store = Redux.createStore(Redux.combineReducers({
            todos,
            goals,
            loading
        }), Redux.applyMiddleware(ReduxThunk.default, checker, logger));


    </script>
    <script type='text/babel'>
        class Provider extends React.Component {
            render () {
                return (
                    <Context.Provider value={this.props.store}>
                        { this.props.children }
                    </Context.Provider>
                )
            }
        }

        ReactDOM.render(
            <ReactRedux.Provider store={store}>
                <ConnectedApp />
            </ReactRedux.Provider>,
            document.getElementById('app')
        );
    </script>
</body>
</html>